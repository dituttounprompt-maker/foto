<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calendario 2026</title>
  <style>
    :root { --bg:#0e0e0e; --card:#1a1a1a; --txt:#fff; }

    *{box-sizing:border-box}

    body{
      font-family:system-ui,sans-serif;
      background:var(--bg);
      color:var(--txt);
      margin:0;
      padding:20px;
      text-align:center;
    }

    /* barra gif a tutta larghezza */
    .hero-gif{
      width:100vw;
      margin-left:50%;
      transform:translateX(-50%);
      overflow:hidden;
      background:#000;
    }
    .hero-gif img{
      width:100%;
      height:auto;
      display:block;
    }

    h1{margin:20px 0 24px}

    /* grid */
    .gallery{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:16px;
      justify-items:center;
    }
    .card{
      width:100%;
      max-width:520px;
      background:var(--card);
      border-radius:14px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.06);
      box-shadow:0 8px 25px rgba(0,0,0,.45);
      transition:transform .15s ease-out, box-shadow .15s ease-out;
      cursor:pointer;
    }
    .card:hover{
      transform:translateY(-3px);
      box-shadow:0 12px 30px rgba(0,0,0,.55);
    }
    .thumb-wrap{
      position:relative;
      background:#000;
    }
    .card img{
      width:100%;
      height:auto;
      border-bottom:1px solid rgba(255,255,255,.05);
      display:block;
    }
    .name{
      padding:10px 12px 14px;
      font-weight:600;
      font-size:.9rem;
      text-align:left;
    }

    .err{
      margin-top:14px;
      color:#ff6464;
      font-weight:500;
    }

    footer{
      margin-top:24px;
      font-size:.7rem;
      color:rgba(255,255,255,.35);
    }

    /* lightbox */
    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.85);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:999;
      gap:12px;
      padding:20px;
    }
    .lightbox[aria-hidden="false"]{display:flex;}
    .lb-wrap{
      max-width:min(1100px,100vw - 90px);
      max-height:90vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
    }
    .lb-img{
      width:auto;
      max-width:100%;
      max-height:82vh;
      border-radius:12px;
      box-shadow:0 0 0 1px rgba(255,255,255,.05);
    }
    .lb-caption{
      font-size:.8rem;
      color:rgba(255,255,255,.7);
    }
    .lb-btn{
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.3);
      color:#fff;
      border-radius:999px;
      width:44px;
      height:44px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:background .1s;
    }
    .lb-btn:hover{background:rgba(255,255,255,.08);}
    .lb-close{position:absolute;top:18px;right:18px}
    .lb-prev,.lb-next{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:48px;
      height:64px;
      font-size:26px;
    }
    .lb-prev{left:12px}
    .lb-next{right:12px}

    @media (min-width:900px){
      .lb-prev{left:-64px}
      .lb-next{right:-64px}
    }

    @media (max-width:700px){
      body{padding:0 0 20px}
      h1{margin:20px 0 16px}
      .gallery{padding:0 12px}
      .lb-btn{width:40px;height:40px}
    }
  </style>
</head>
<body>

  <!-- GIF a tutta larghezza -->
  <div class="hero-gif">
    <img src="logo-animato.gif" alt="Logo animato Zanon">
  </div>

  <h1>Calendario 2026</h1>

  <div id="gallery" class="gallery"></div>
  <div id="error" class="err"></div>

  <footer>© 2025 NikRasta — © tutte le immagini</footer>

  <!-- Lightbox Modal -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Immagine ingrandita">
    <button class="lb-btn lb-close" aria-label="Chiudi">✕</button>
    <button class="lb-btn lb-prev" aria-label="Precedente">❮</button>
    <div class="lb-wrap">
      <img id="lbImg" class="lb-img" alt="">
      <div id="lbCaption" class="lb-caption"></div>
    </div>
    <button class="lb-btn lb-next" aria-label="Successiva">❯</button>
  </div>

  <script>
    // Config: cambia repo/path se serve
    const GITHUB_API = "https://api.github.com/repos/dituttounprompt-maker/dituttounprompt-maker.github.io/contents/foto";

    const state = {
      files: [],
      idx: 0
    };

    async function load(){
      const g = document.getElementById("gallery");
      g.innerHTML = "Carico...";
      try{
        const res = await fetch(GITHUB_API);
        if(!res.ok) throw new Error("Risposta GitHub " + res.status);
        const data = await res.json();
        const images = data.filter(f => f.type === "file" && /\.(png|jpe?g|gif|webp|avif)$/i.test(f.name));
        state.files = images;
        g.innerHTML = "";
        images.forEach((f,i)=>{
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <div class="thumb-wrap">
              <img loading="lazy" src="${f.download_url}" alt="${f.name.replace(/\.[^.]+$/,'')}">
            </div>
            <div class="name">${f.name.replace(/\.[^.]+$/,'')}</div>`;
          card.addEventListener("click", () => openLightbox(i));
          g.appendChild(card);
        });
      } catch (e) {
        document.getElementById("error").textContent = "Errore: " + e.message;
      }
    }

    // Lightbox controls
    const lb = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbCaption = document.getElementById("lbCaption");

    function openLightbox(i){
      state.idx = i;
      const f = state.files[i];
      lbImg.src = f.download_url;
      lbImg.alt = f.name.replace(/\.[^.]+$/,'');
      lbCaption.textContent = lbImg.alt;
      lb.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }
    function closeLightbox(){
      lb.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }
    function prev(){
      if(!state.files.length) return;
      state.idx = (state.idx - 1 + state.files.length) % state.files.length;
      openLightbox(state.idx);
    }
    function next(){
      if(!state.files.length) return;
      state.idx = (state.idx + 1) % state.files.length;
      openLightbox(state.idx);
    }

    document.querySelector(".lb-close").addEventListener("click", closeLightbox);
    document.querySelector(".lb-prev").addEventListener("click", prev);
    document.querySelector(".lb-next").addEventListener("click", next);
    lb.addEventListener("click", e => { if(e.target === lb) closeLightbox(); });

    // tasti
    document.addEventListener("keydown", e=>{
      if(lb.getAttribute("aria-hidden") === "true") return;
      if(e.key === "Escape") closeLightbox();
      if(e.key === "ArrowLeft") prev();
      if(e.key === "ArrowRight") next();
    });

    // swipe mobile
    let sx=0;
    lb.addEventListener("touchstart",e=>{ sx = e.changedTouches[0].clientX; },{passive:true});
    lb.addEventListener("touchend",e=>{
      const dx = e.changedTouches[0].clientX - sx;
      if(Math.abs(dx) > 40) (dx<0?next:prev)();
    },{passive:true});

    load();
  </script>
</body>
</html>
